!function(r){"use strict";function e(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function o(t){this.options=e({},this.options),e(this.options,t),this.number=this.options.number,this.color=this.options.color,this.previewTitle=this.options.previewTitle,this.isActive=!this.options.inactive,this._layout()}function i(t){this.el=t,this.calendarDays=[].slice.call(this.el.querySelectorAll(".cube")),this.cubes=document.createElement("div"),this.cubes.className="cubes",this.el.appendChild(this.cubes),this.days=[];var a=this;this.calendarDays.forEach(function(t,e){var i=new o({number:e,color:t.getAttribute("data-bg-color")||"#f1f1f1",previewTitle:t.getAttribute("data-title")||"",inactive:t.hasAttribute("data-inactive")});if(void 0!==m[e]){var n=m[e].querySelector(".content__title");i._setContentTitleFx(n)}a.days.push(i),a.cubes.appendChild(i.cube),a.el.removeChild(t),a._initDayEvents(i)}),this.dayPreview=document.createElement("h2"),this.dayPreview.className="title",this.el.appendChild(this.dayPreview),this._initEvents()}function n(){this.canvas=document.createElement("canvas"),this.canvas.id="snow",this.canvas.className="background",this.canvas.style.background=d,document.body.insertBefore(this.canvas,document.body.firstElementChild),this.flakes=[],this.ctx=this.canvas.getContext("2d"),this.flakeCount=300,this.mX=-100,this.mY=-100,this.width=this.canvas.width=r.innerWidth,this.height=this.canvas.height=r.innerHeight,this._init()}o.prototype.options={number:0,color:"#f1f1f1",previewTitle:"",inactive:!1},o.prototype._layout=function(){this.cube=document.createElement("div"),this.cube.className=this.isActive?"cube":"cube cube--inactive",this.cube.innerHTML='<div class="cube__side cube__side--back"></div><div class="cube__side cube__side--left"></div><div class="cube__side cube__side--right"></div><div class="cube__side cube__side--bottom"></div><div class="cube__side cube__side--top"></div><div class="cube__side cube__side--front"><div class="cube__number">'+(this.number+1)+"</div></div>",this.currentTransform={translateZ:0,rotateX:0,rotateY:0}},o.prototype._rotate=function(t){anime.remove(this.cube);var e=this._getDirection(t),i="mouseenter"===t.type.toLowerCase()?1:-1,n={targets:this.cube,duration:500,easing:"easeOutExpo"};switch(n.translateZ={value:1===i?100:0,duration:900,easing:"easeOutExpo"},e){case 0:n.rotateX=1===i?-180:0,n.rotateY=0;break;case 1:n.rotateY=1===i?-180:0,n.rotateX=0;break;case 2:n.rotateX=1===i?180:0,n.rotateY=0;break;case 3:n.rotateY=1===i?180:0,n.rotateX=0}this.currentTransform={translateZ:n.translateZ,rotateX:n.rotateX,rotateY:n.rotateY},anime(n)},o.prototype._setContentTitleFx=function(t){this.titlefx=new TextFx(t),this.titlefxSettings={in:{duration:800,delay:function(t,e){return 650+10*e},easing:"easeOutExpo",opacity:{duration:200,value:[0,1],easing:"linear"},translateY:[100,0],rotateZ:function(t,e){return[anime.random(-20,20),0]}},out:{duration:800,delay:400,easing:"easeInExpo",opacity:0,translateY:350}}},o.prototype._getDirection=function(t){var e=this.cube.querySelector(".cube__side--front"),i=e.offsetWidth,n=e.offsetHeight,a=e.getBoundingClientRect(),o=t.pageX-(a.left+r.pageXOffset)-i/2*(n<i?n/i:1),s=t.pageY-(a.top+r.pageYOffset)-n/2*(i<n?i/n:1);return Math.round(Math.atan2(s,o)/1.57079633+5)%4},i.prototype._initEvents=function(){var a=this;l.tilt&&(this.mousemoveFn=function(e){if(a.isOpen)return!1;requestAnimationFrame(function(){var t=function(t){var e=0,i=0;t||(t=r.event);return t.pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:e,y:i}}(e);a._rotateCalendar(t)})},this.handleOrientation=function(){if(a.isOpen)return!1;var i=event.gamma;i+=90,requestAnimationFrame(function(){var t=40,e=2*t/180*i-t;a.cubes.style.WebkitTransform=a.cubes.style.transform="rotate3d(0,-1,0,"+e+"deg)"})},f?r.addEventListener("deviceorientation",this.handleOrientation):document.addEventListener("mousemove",this.mousemoveFn)),this.backToCalendarFn=function(t){if(!a.isOpen||a.isAnimating)return!1;a.isAnimating=!0,a._hidePreviewTitle(),a._hideContent(),anime({targets:a.el,duration:1200,easing:"easeInOutExpo",opacity:1,complete:function(){a.isOpen=!1,a.isAnimating=!1}});for(var e=0,i=a.days.length;e<i;++e){var n=a.days[e];a.currentDayIdx===e?(anime({targets:n.cube,duration:1200,delay:1e3,easing:"easeOutExpo",scale:1,translateY:0,translateZ:[-1500,0],rotateX:0,rotateY:0}),n.isRotated=!1):anime({targets:n.cube,duration:1200,delay:1e3,easing:"easeOutExpo",scale:1,translateX:0,translateY:0,translateZ:[3e3,0],rotateY:0})}},p.addEventListener("click",this.backToCalendarFn)},i.prototype._initDayEvents=function(t){var o=this,s=t;f||(s.mouseenterFn=function(t){if(s.isRotated||o.isOpen)return!1;clearTimeout(a),s.rotatetimeout=setTimeout(function(){a=setTimeout(function(){o._changeBGColor(s.color)},30),s._rotate(t),o._showPreviewTitle(s.previewTitle,s.number),s.isRotated=!0},30)},s.mouseleaveFn=function(t){if(o.isOpen)return!1;clearTimeout(s.rotatetimeout),clearTimeout(a),s.isRotated&&(a=setTimeout(function(){o._resetBGColor()},35),o._resetBGColor(),s._rotate(t),o._hidePreviewTitle(),s.isRotated=!1)}),s.clickFn=function(t){if(!s.isActive||o.isAnimating)return!1;o.isAnimating=!0,o.isOpen=!0,o.currentDayIdx=s.number,anime({targets:o.el,duration:1200,easing:"easeInOutExpo",opacity:0,complete:function(){o.isAnimating=!1}});for(var e=0,i=o.days.length;e<i;++e){var n=o.days[e];if(o.currentDayIdx===e)anime({targets:n.cube,duration:600,delay:200,easing:"easeInExpo",scale:1.1,translateY:2*-r.innerHeight,translateZ:n.currentTransform.translateZ,rotateX:n.currentTransform.rotateX,rotateY:n.currentTransform.rotateY}),o._showContent(s);else{var a=n.cube.getBoundingClientRect();anime({targets:n.cube,duration:1200,easing:"easeInOutExpo",scale:.1,translateX:function(t,e){return a.left+r.pageXOffset<=r.innerWidth/2?anime.random(-800,0):anime.random(0,800)},translateY:function(t,e){return a.top+r.pageYOffset<=r.innerHeight/2?anime.random(-1400,-200):anime.random(-200,600)},translateZ:-1500,rotateY:function(t,e){return a.left+r.pageXOffset<=r.innerWidth/2?anime.random(-40,0):anime.random(0,40)}})}}},s.cube.querySelector(".cube__side--front").addEventListener("mouseenter",s.mouseenterFn),s.cube.addEventListener("mouseleave",s.mouseleaveFn),s.cube.addEventListener("click",s.clickFn),s.cube.addEventListener("mousedown",function(){clearTimeout(s.rotatetimeout)})},i.prototype._rotateCalendar=function(t){var e=3,i=3,n=2*e/this.cubes.offsetHeight*t.y-e,a=2*i/this.cubes.offsetWidth*t.x-i;this.cubes.style.WebkitTransform=this.cubes.style.transform="rotate3d(-1,0,0,"+n+"deg) rotate3d(0,1,0,"+a+"deg)"},i.prototype._showPreviewTitle=function(t,e){this.dayPreview.innerHTML=t,this.dayPreview.setAttribute("data-number",parseInt(e+1)),this.txtfx=new TextFx(this.dayPreview),this.txtfx.hide(),this.dayPreview.style.opacity=1,this.txtfx.show({in:{duration:800,delay:function(t,e){return 20*e},easing:"easeOutElastic",opacity:1,translateY:function(t,e){return e%2==0?[-25,0]:[25,0]}}})},i.prototype._hidePreviewTitle=function(){this.txtfx&&this.txtfx.hide(),this.dayPreview.style.opacity=0},i.prototype._showContent=function(t){var e=m[this.currentDayIdx],i=(e.querySelector(".content__title"),e.querySelector(".content__description")),n=e.querySelector(".content__meta"),a=e.querySelector(".content__contributor");e.classList.add("content__block--current"),t.titlefx.hide(),t.titlefx.show(t.titlefxSettings),anime({targets:[i,n,a],duration:800,delay:function(t,e){return 0===e?900:1e3},easing:"easeOutExpo",opacity:[0,1],translateY:[100,0]}),anime({targets:p,duration:1e3,delay:800,easing:"easeOutExpo",opacity:[0,1],translateY:[50,0]}),v.innerHTML=this.currentDayIdx+1,anime({targets:v,duration:500,delay:800,easing:"easeOutExpo",opacity:[0,1],translateX:[100,0]})},i.prototype._hideContent=function(){var t=this.days[this.currentDayIdx],e=m[this.currentDayIdx],i=(e.querySelector(".content__title"),e.querySelector(".content__description")),n=e.querySelector(".content__meta");anime({targets:v,duration:500,easing:"easeInExpo",opacity:0,translateX:100}),anime({targets:p,duration:1e3,easing:"easeInExpo",opacity:0,translateY:50}),anime({targets:[i,n],duration:800,delay:function(t,e){return 0===e?150:0},easing:"easeInExpo",opacity:[1,0],translateY:[0,200]}),t.titlefx.hide(t.titlefxSettings,function(){e.classList.remove("content__block--current")})},i.prototype._changeBGColor=function(t){u.style.backgroundColor=t},i.prototype._resetBGColor=function(){u.style.backgroundColor=d},n.prototype._init=function(){var t=this;r.addEventListener("resize",function(){t.width=t.canvas.width=r.innerWidth,t.height=t.canvas.height=r.innerHeight});for(var e=0;e<this.flakeCount;++e){var i=Math.floor(Math.random()*this.width),n=Math.floor(Math.random()*this.height),a=3.5*Math.random()+.5,o=.5*a,s=.5*Math.random()+.1;this.flakes.push({speed:o,velY:o,velX:0,x:i,y:n,size:a,stepSize:Math.random()/30,step:0,opacity:s})}this._snow()},n.prototype._snow=function(){this.ctx.clearRect(0,0,this.width,this.height);for(var t=0;t<this.flakeCount;++t){var e=this.flakes[t],i=this.mX,n=this.mY,a=e.x,o=e.y,s=Math.sqrt((a-i)*(a-i)+(o-n)*(o-n));if(s<150){var r=(i-a)/s,c=(n-o)/s,l=150/(s*s)/2;e.velX-=l*r,e.velY-=l*c}else e.velX*=.98,e.velY<=e.speed&&(e.velY=e.speed),e.velX+=Math.cos(e.step+=.05)*e.stepSize;this.ctx.fillStyle="rgba(255,255,255,"+e.opacity+")",e.y+=e.velY,e.x+=e.velX,(e.y>=this.height||e.y<=0)&&this._reset(e),(e.x>=this.width||e.x<=0)&&this._reset(e),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.size,0,2*Math.PI),this.ctx.fill()}requestAnimationFrame(this._snow.bind(this))},n.prototype._reset=function(t){t.x=Math.floor(Math.random()*this.width),t.y=0,t.size=3.5*Math.random()+.5,t.speed=.5*t.size,t.velY=t.speed,t.velX=0,t.opacity=.5*Math.random()+.1};var a,t,s,c=document.querySelector(".calendar"),l=([].slice.call(c.children),{snow:!1,tilt:!0}),u=document.body,d=u.style.backgroundColor,h=document.querySelector(".content"),m=h.querySelectorAll(".content__block"),p=h.querySelector(".btn-back"),v=h.querySelector(".content__number"),f=(s=!1,t=navigator.userAgent||navigator.vendor||r.opera,(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(s=!0),s);!function(){for(var t=(new Date).getDate()+1;t<26;t++){var e=document.getElementById("day"+t);e.setAttribute("data-inactive",""),e.setAttribute("data-bg-color","#6161616"),e.setAttribute("data-title","Coming soon...")}}(),function(){if(new i(c),l.snow){var t=new n;u=t.canvas}}()}(window);